{
    "components": [
        {
            "name": "Row",
            "components": [
                {
                    "name": "Cell",
                    "components": [
                        { "name": "div", "props": { "children": "Clients", "style": { "fontSize": "32px" } } }
                    ]
                },
                {
                    "name": "Cell",
                    "props": { "xsAuto": true },
                    "components": [
                        {
                            "name": "Button",
                            "props": {
                                "label": "New",
                                "onClick": {
                                    "$type": "$action",
                                    "path": "$page.openModal",
                                    "args": [
                                        "editClient",
                                        {
                                            "form": {
                                                "$type": "$data",
                                                "path": "$store.forms.getForm[{\"apiName\":\"custodian\",\"modelName\":\"client\"}]"
                                            }
                                        }
                                    ]
                                }
                            }
                        }
                    ]
                }
            ]
        },
        { "name": "Spacer", "props": { "size": 16 } },
        {
            "name": "Cell",
            "props": {
                "style": {
                    "borderRadius": "3px",
                    "backgroundColor": "#fff",
                    "padding": "16px",
                    "boxShadow": "0 2px 10px 0 hsla(0,0%,60.4%,.15)"
                }
            },
            "components": [
                {
                    "name": "List",
                    "props": {
                        "entity": {
                            "$type": "$data",
                            "path": "$store.apis.custodian.client"
                        },
                        "components": [
                            {
                                "name": "Row",
                                "components": [
                                    {
                                        "name": "Cell",
                                        "props": {
                                            "xsAuto": true,
                                            "children": { "$type": "$data", "path": "$context.id" }
                                        }
                                    },
                                    {
                                        "name": "Cell",
                                        "components": [
                                            {
                                                "name": "Link",
                                                "props": {
                                                    "to": {
                                                        "$type": "$expression",
                                                        "expression": "\"/client/\" || data(\"$context.id\")"
                                                    },
                                                    "children": { "$type": "$data", "path": "$context.name" }
                                                }
                                            }
                                        ]
                                    },
                                    {
                                        "name": "Cell",
                                        "props": {
                                            "children": { "$type": "$data", "path": "$context.client_type.name" }
                                        }
                                    }
                                ]
                            }
                        ],
                        "topComponents": [
                            {
                                "name": "Button",
                                "props": {
                                    "specialType": "arrowLeft",
                                    "type": "text",
                                    "style": "& div:last-child{color:var(--trood-red);}",
                                    "onClick": { "$type": "$data", "path": "$context.prevPage" }
                                }
                            },
                            {
                                "name": "Button",
                                "props": {
                                    "specialType": "arrowRight",
                                    "type": "text",
                                    "style": "& div:last-child{color:var(--trood-red);}",
                                    "onClick": { "$type": "$data", "path": "$context.nextPage" }
                                }
                            }
                        ]
                    }
                }
            ]
        },
        {
            "name": "Modal",
            "props": {
                "style": { "minWidth": "400px" },
                "isOpen": { "$type": "$data", "path": "$page.isModalOpen[\"editClient\"]" },
                "close": {
                    "$type": "$action",
                    "path": "$page.closeModal",
                    "args": ["editClient"]
                }
            },
            "components": [
                { "name": "div", "props": { "children": "Create Client", "style": { "fontSize": "22px" } } },
                { "name": "Spacer", "size": 16 },
                {
                    "name": "Context",
                    "props": { "context": { "$type": "$data", "path": "$page.getContext[\"editClient\"]" } },
                    "components": [
                        {
                            "name": "Input",
                            "props": {
                                "label": "Name",
                                "value": { "$type": "$data", "path": "$context.form.data.name" },
                                "onChange": {
                                    "$type": "$action",
                                    "path": "$context.form.changeFields",
                                    "args": [
                                        {
                                            "$type": "$data",
                                            "path": { "name": { "$type": "$data", "path": "$event" } }
                                        }
                                    ]
                                }
                            }
                        },
                        { "name": "Spacer", "size": 8 },
                        {
                            "name": "Select",
                            "props": {
                                "label": "Type",
                                "values": { "$type": "$data", "path": "$context.form.data.client_type" },
                                "items": { "$type": "$data", "path": "$store.apis.custodian.client.getPage[0, 10]" },
                                "labelProp": "name",
                                "valueProp": "id",
                                "onChange": {
                                    "$type": "$action",
                                    "path": "$context.form.changeFields",
                                    "args": [
                                        {
                                            "$type": "$data",
                                            "path": { "client_type": { "$type": "$data", "path": "$event" } }
                                        }
                                    ]
                                }
                            }
                        }
                    ]
                }
            ]
        }
    ]
}
